<!-- showing graph using jsGraph -->

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <script language="javascript" src="./jsgraph.min.js"></script>
  </head>

  <body>
    <div id="graph"></div>

    <script>
      // fetching data

      createGraph();

      async function createGraph() {
        var response = await fetch('./data.json');
        var values = await response.json();

        response = await fetch('./annotations.json');
        var annotations = await response.json();

        // options for zoom
        let options = {
          plugins: {
            zoom: {
              zoomMode: 'xy',
            },
          },
          mouseActions: [
            {
              plugin: 'zoom',
              shift: false,
              ctrl: false,
            },
            {
              plugin: 'zoom',
              type: 'mousewheel',
              options: {
                direction: 'y',
              },
            },
            {
              plugin: 'zoom',
              type: 'dblclick',
              options: {
                mode: 'total',
              },
            },
          ],
        };

        var graph = new Graph('graph', options);
        graph.resize(500, 500); // Resizes the container

        let waveForm = Graph.newWaveform();
        let arrayX = values.x;
        let arrayY = values.y;
        waveForm.setData(arrayY, arrayX);

        graph
          .newSerie('line serie', {}, 'line') // Creates a new serie
          .autoAxis() // Assigns axes
          .setWaveform(waveForm);

        var modifiers = []; // We can define a specific style for some points in the scatter plot
        // modifiers[20] = { shape: 'circle', r: 12, fill: 'rgba(0, 100, 255, 0.3)', stroke: 'rgb(0, 150, 255)' };

        graph
          .newSerie('scatter serie', {}, 'scatter') // Creates a new serie
          .autoAxis() // Assigns axes
          .setWaveform(waveForm)
          .setStyle(
            { shape: 'circle', r: 4, fill: 'green', stroke: 'blue' },
            modifiers,
          );

        // adding shapes
        // https://github.com/NPellet/jsGraph/tree/master/src/shapes

        console.log(annotations);
        for (let annotation of annotations) {
          let shape = graph.newShape(annotation.type, annotation.data);
          // shape.autoAxes();
          shape.draw();
        }

        graph.draw(); // Draw
      }
    </script>
  </body>
</html>
